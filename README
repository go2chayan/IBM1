README
======

I did it as a part of homework problem in the Statistical Speech and Language Processing course taught by 
Prof Daniel Gildea (https://www.cs.rochester.edu/~gildea/) in Fall 2015. Here I implemented the IBM model1
for machine translation.
==========================================================================================================

Name: Md. Iftekhar Tanveer
Email: itanveer@cs.rochester.edu  or  mtanveer@z.rochester.edu
Course: CS448
Homework 6: Implement IBM Model 1, and plot log probability of training and test files in /u/cs448/data/mt. Here is a simple test case.


************** Files ***************
README: This document
hw6.py: The original python script.
training_short.eng: A short training dataset (~100 sentences) for quick check of the algorithm
training_short.fra: A short training dataset (~100 sentences) for quick check of the algorithm
test_short.eng: A short test dataset for quick check of the algorithm
test_short.fra: A short test dataset for quick check of the algorithm
result_small.png: Plot results on a short dataset
result_Full.png: Plot results on the full dataset

Please NOTE:
============
This program assumes the following files are also present in the folder. Due to large size, I
haven't included these files. Please copy these files before running the code.
training.eng
training.fra
test.eng
test.fra


*********** Instructions ***********
Just run the script hw6.py. It will run the following 3 modules one by one:
1. sampleresults. This module runs the test case provided in the website. The output of this module is shown in the results section
2. runondata('training_short.eng','training_short.fra','test_short.eng','test_short.fra',\
        'result_small.png',10)
   This module runs the program on a small dataset. This is useful for quickly creating a plot of test and training likelihoods
3. runondata('training.eng','training.fra','test.eng','test.fra','result_Full.png',20)
   This module runs the program on the full dataset. This is the desired result but it takes long time to finish.

************* Algorithm ************
As described in class. Please check 
the inline comments in the code

************* Results **************
E Step
Pr. Lookup: NULL A 1e-16 1e-16
Pr. Lookup: a A 1e-16 2e-16
Pr. Lookup: b A 1e-16 3e-16
Pr. Lookup: NULL B 1e-16 1e-16
Pr. Lookup: a B 1e-16 2e-16
Pr. Lookup: b B 1e-16 3e-16
Pr. Lookup: NULL A 1e-16 1e-16
Pr. Lookup: a A 1e-16 2e-16
Pr. Lookup: c A 1e-16 3e-16
Pr. Lookup: NULL C 1e-16 1e-16
Pr. Lookup: a C 1e-16 2e-16
Pr. Lookup: c C 1e-16 3e-16
M Step
NULL A 0.666667666667 0.500000375
a A 0.666667666667 0.500000375
b B 0.333334333333 0.500000749999
a B 0.333334333333 0.2500005625
c A 0.333334333333 0.500000749999
a C 0.333334333333 0.2500005625
c C 0.333334333333 0.500000749999
b A 0.333334333333 0.500000749999
NULL C 0.333334333333 0.2500005625
NULL B 0.333334333333 0.2500005625

Iteration # 0
================
train loglikelihood -3.58351318847
test loglikelihood -2.77258522225

E Step
Pr. Lookup: NULL A 0.500000375 0.500000375
Pr. Lookup: a A 0.500000375 1.00000075
Pr. Lookup: b A 0.500000749999 1.5000015
Pr. Lookup: NULL B 0.2500005625 0.2500005625
Pr. Lookup: a B 0.2500005625 0.500001124999
Pr. Lookup: b B 0.500000749999 1.000001875
Pr. Lookup: NULL A 0.500000375 0.500000375
Pr. Lookup: a A 0.500000375 1.00000075
Pr. Lookup: c A 0.500000749999 1.5000015
Pr. Lookup: NULL C 0.2500005625 0.2500005625
Pr. Lookup: a C 0.2500005625 0.500001124999
Pr. Lookup: c C 0.500000749999 1.000001875
M Step
NULL A 0.666667500001 0.571428785714
a A 0.666667500001 0.571428785714
b B 0.5000008125 0.60000027
a B 0.25000109375 0.214286464285
c B 1e-06 1.19999859e-06
c A 0.333334499999 0.400000929998
a C 0.25000109375 0.214286464285
b C 1e-06 1.19999859e-06
c C 0.5000008125 0.60000027
b A 0.333334499999 0.400000929998
NULL C 0.25000109375 0.214286464285
NULL B 0.25000109375 0.214286464285

Iteration # 1
================
train loglikelihood -3.47083022782
test loglikelihood -2.60810707315

E Step
Pr. Lookup: NULL A 0.571428785714 0.571428785714
Pr. Lookup: a A 0.571428785714 1.14285757143
Pr. Lookup: b A 0.400000929998 1.54285850143
Pr. Lookup: NULL B 0.214286464285 0.214286464285
Pr. Lookup: a B 0.214286464285 0.42857292857
Pr. Lookup: b B 0.60000027 1.02857319857
Pr. Lookup: NULL A 0.571428785714 0.571428785714
Pr. Lookup: a A 0.571428785714 1.14285757143
Pr. Lookup: c A 0.400000929998 1.54285850143
Pr. Lookup: NULL C 0.214286464285 0.214286464285
Pr. Lookup: a C 0.214286464285 0.42857292857
Pr. Lookup: c C 0.60000027 1.02857319857
M Step
NULL A 0.740741366256 0.639999784642
a A 0.740741366256 0.639999784642
b B 0.583333592016 0.692307479081
a B 0.208334703992 0.180000971678
c B 1e-06 1.18681229498e-06
c A 0.259260633744 0.307693707732
a C 0.208334703992 0.180000971678
b C 1e-06 1.18681229498e-06
c C 0.583333592016 0.692307479081
b A 0.259260633744 0.307693707732
NULL C 0.208334703992 0.180000971678
NULL B 0.208334703992 0.180000971678

Iteration # 2
================
train loglikelihood -3.3679103696
test loglikelihood -2.47044623563

E Step
Pr. Lookup: NULL A 0.639999784642 0.639999784642
Pr. Lookup: a A 0.639999784642 1.27999956928
Pr. Lookup: b A 0.307693707732 1.58769327702
Pr. Lookup: NULL B 0.180000971678 0.180000971678
Pr. Lookup: a B 0.180000971678 0.360001943356
Pr. Lookup: b B 0.692307479081 1.05230942244
Pr. Lookup: NULL A 0.639999784642 0.639999784642
Pr. Lookup: a A 0.639999784642 1.27999956928
Pr. Lookup: c A 0.307693707732 1.58769327702
Pr. Lookup: NULL C 0.180000971678 0.180000971678
Pr. Lookup: a C 0.180000971678 0.360001943356
Pr. Lookup: c C 0.692307479081 1.05230942244
M Step
NULL A 0.806201786899 0.702077798084
a A 0.806201786899 0.702077798084
b B 0.657894452553 0.772454321411
a B 0.171054273724 0.148961971804
c B 1e-06 1.17413107591e-06
c A 0.193800213101 0.22754685272
a C 0.171054273724 0.148961971804
b C 1e-06 1.17413107591e-06
c C 0.657894452553 0.772454321411
b A 0.193800213101 0.22754685272
NULL C 0.171054273724 0.148961971804
NULL B 0.171054273724 0.148961971804

Iteration # 3
================
train loglikelihood -3.27917711138
test loglikelihood -2.36090871586

E Step
Pr. Lookup: NULL A 0.702077798084 0.702077798084
Pr. Lookup: a A 0.702077798084 1.40415559617
Pr. Lookup: b A 0.22754685272 1.63170244889
Pr. Lookup: NULL B 0.148961971804 0.148961971804
Pr. Lookup: a B 0.148961971804 0.297923943609
Pr. Lookup: b B 0.772454321411 1.07037826502
Pr. Lookup: NULL A 0.702077798084 0.702077798084
Pr. Lookup: a A 0.702077798084 1.40415559617
Pr. Lookup: c A 0.22754685272 1.63170244889
Pr. Lookup: NULL C 0.148961971804 0.148961971804
Pr. Lookup: a C 0.148961971804 0.297923943609
Pr. Lookup: c C 0.772454321411 1.07037826502
M Step
NULL A 0.860547355817 0.755606761077
a A 0.860547355817 0.755606761077
b B 0.721665804541 0.838055400572
a B 0.139168597729 0.122197497515
c B 1e-06 1.16127907862e-06
c A 0.139454644183 0.161945760707
a C 0.139168597729 0.122197497515
b C 1e-06 1.16127907862e-06
c C 0.721665804541 0.838055400572
b A 0.139454644183 0.161945760707
NULL C 0.139168597729 0.122197497515
NULL B 0.139168597729 0.122197497515

Iteration # 4
================
train loglikelihood -3.20656719203
test loglikelihood -2.27833934606

E Step
Pr. Lookup: NULL A 0.755606761077 0.755606761077
Pr. Lookup: a A 0.755606761077 1.51121352215
Pr. Lookup: b A 0.161945760707 1.67315928286
Pr. Lookup: NULL B 0.122197497515 0.122197497515
Pr. Lookup: a B 0.122197497515 0.24439499503
Pr. Lookup: b B 0.838055400572 1.0824503956
Pr. Lookup: NULL A 0.755606761077 0.755606761077
Pr. Lookup: a A 0.755606761077 1.51121352215
Pr. Lookup: c A 0.161945760707 1.67315928286
Pr. Lookup: NULL C 0.122197497515 0.122197497515
Pr. Lookup: a C 0.122197497515 0.24439499503
Pr. Lookup: c C 0.838055400572 1.0824503956
M Step
NULL A 0.903210597337 0.80001647824
a A 0.903210597337 0.80001647824
b B 0.774221605376 0.888875926199
a B 0.112890697312 0.0999926466275
c B 1e-06 1.14808979758e-06
c A 0.0967914026627 0.111125221891
a C 0.112890697312 0.0999926466275
b C 1e-06 1.14808979758e-06
c C 0.774221605376 0.888875926199
b A 0.0967914026627 0.111125221891
NULL C 0.112890697312 0.0999926466275
NULL B 0.112890697312 0.0999926466275

Iteration # 5
================
train loglikelihood -3.14984348296
test loglikelihood -2.21960994559

E Step
Pr. Lookup: NULL A 0.80001647824 0.80001647824
Pr. Lookup: a A 0.80001647824 1.60003295648
Pr. Lookup: b A 0.111125221891 1.71115817837
Pr. Lookup: NULL B 0.0999926466275 0.0999926466275
Pr. Lookup: a B 0.0999926466275 0.199985293255
Pr. Lookup: b B 0.888875926199 1.08886121945
Pr. Lookup: NULL A 0.80001647824 0.80001647824
Pr. Lookup: a A 0.80001647824 1.60003295648
Pr. Lookup: c A 0.111125221891 1.71115817837
Pr. Lookup: NULL C 0.0999926466275 0.0999926466275
Pr. Lookup: a C 0.0999926466275 0.199985293255
Pr. Lookup: c C 0.888875926199 1.08886121945
M Step
NULL A 0.935059474842 0.835826698105
a A 0.935059474842 0.835826698105
b B 0.816336369759 0.926309821757
a B 0.0918333151206 0.082087544823
c B 1e-06 1.13471585497e-06
c A 0.0649425251584 0.0736913129592
a C 0.0918333151206 0.082087544823
b C 1e-06 1.13471585497e-06
c C 0.816336369759 0.926309821757
b A 0.0649425251584 0.0736913129592
NULL C 0.0918333151206 0.082087544823
NULL B 0.0918333151206 0.082087544823

Iteration # 6
================
train loglikelihood -3.10730005992
test loglikelihood -2.18049771712

E Step
Pr. Lookup: NULL A 0.835826698105 0.835826698105
Pr. Lookup: a A 0.835826698105 1.67165339621
Pr. Lookup: b A 0.0736913129592 1.74534470917
Pr. Lookup: NULL B 0.082087544823 0.082087544823
Pr. Lookup: a B 0.082087544823 0.164175089646
Pr. Lookup: b B 0.926309821757 1.0904849114
Pr. Lookup: NULL A 0.835826698105 0.835826698105
Pr. Lookup: a A 0.835826698105 1.67165339621
Pr. Lookup: c A 0.0736913129592 1.74534470917
Pr. Lookup: NULL C 0.082087544823 0.082087544823
Pr. Lookup: a C 0.082087544823 0.164175089646
Pr. Lookup: c C 0.926309821757 1.0904849114
M Step
NULL A 0.957779361734 0.86416307762
a A 0.957779361734 0.86416307762
b B 0.849448628363 0.952648821155
a B 0.0752771858185 0.0679193634468
c B 1e-06 1.12149079926e-06
c A 0.0422226382656 0.0473523003354
a C 0.0752771858185 0.0679193634468
b C 1e-06 1.12149079926e-06
c C 0.849448628363 0.952648821155
b A 0.0422226382656 0.0473523003354
NULL C 0.0752771858185 0.0679193634468
NULL B 0.0752771858185 0.0679193634468

Iteration # 7
================
train loglikelihood -3.07650567374
test loglikelihood -2.15650334769

E Step
Pr. Lookup: NULL A 0.86416307762 0.86416307762
Pr. Lookup: a A 0.86416307762 1.72832615524
Pr. Lookup: b A 0.0473523003354 1.77567845558
Pr. Lookup: NULL B 0.0679193634468 0.0679193634468
Pr. Lookup: a B 0.0679193634468 0.135838726894
Pr. Lookup: b B 0.952648821155 1.08848754805
Pr. Lookup: NULL A 0.86416307762 0.86416307762
Pr. Lookup: a A 0.86416307762 1.72832615524
Pr. Lookup: c A 0.0473523003354 1.77567845558
Pr. Lookup: NULL C 0.0679193634468 0.0679193634468
Pr. Lookup: a C 0.0679193634468 0.135838726894
Pr. Lookup: c C 0.952648821155 1.08848754805
M Step
NULL A 0.973333840647 0.886356001907
a A 0.973333840647 0.886356001907
b B 0.875205151727 0.970431335982
a B 0.0623989241366 0.0568229096857
c B 1e-06 1.10880441468e-06
c A 0.0266681593535 0.0295697728224
a C 0.0623989241366 0.0568229096857
b C 1e-06 1.10880441468e-06
c C 0.875205151727 0.970431335982
b A 0.0266681593535 0.0295697728224
NULL C 0.0623989241366 0.0568229096857
NULL B 0.0623989241366 0.0568229096857

Iteration # 8
================
train loglikelihood -3.05488396906
test loglikelihood -2.14344349493

E Step
Pr. Lookup: NULL A 0.886356001907 0.886356001907
Pr. Lookup: a A 0.886356001907 1.77271200381
Pr. Lookup: b A 0.0295697728224 1.80228177664
Pr. Lookup: NULL B 0.0568229096857 0.0568229096857
Pr. Lookup: a B 0.0568229096857 0.113645819371
Pr. Lookup: b B 0.970431335982 1.08407715535
Pr. Lookup: NULL A 0.886356001907 0.886356001907
Pr. Lookup: a A 0.886356001907 1.77271200381
Pr. Lookup: c A 0.0295697728224 1.80228177664
Pr. Lookup: NULL C 0.0568229096857 0.0568229096857
Pr. Lookup: a C 0.0568229096857 0.113645819371
Pr. Lookup: c C 0.970431335982 1.08407715535
M Step
NULL A 0.98359414664 0.903684903687
a A 0.98359414664 0.903684903687
b B 0.895169144804 0.982001661526
a B 0.052416927598 0.0481584669142
c B 1e-06 1.09700123963e-06
c A 0.0164078533599 0.0179994354754
a C 0.052416927598 0.0481584669142
b C 1e-06 1.09700123963e-06
c C 0.895169144804 0.982001661526
b A 0.0164078533599 0.0179994354754
NULL C 0.052416927598 0.0481584669142
NULL B 0.052416927598 0.0481584669142

Iteration # 9
================
train loglikelihood -3.04007862819
test loglikelihood -2.13779393824

*************************************
Also,
The png files are generated for showing the plot results.